<main class="main-content">
  <div class="container">
    <div class="page-header">
      <h1 class="page-title">{{ getTranslatedText('School Renovation Application', 'பள்ளி புதுப்பித்தல் விண்ணப்பம்') }}</h1>
      <p class="page-subtitle">
        {{ getTranslatedText('Apply for government school renovation under the Tamil Nadu School Infrastructure Development Program.', 'தமிழ்நாடு பள்ளி உட்கட்டமைப்பு மேம்பாட்டுத் திட்டத்தின் கீழ் அரசுப் பள்ளி புதுப்பித்தலுக்கு விண்ணப்பிக்கவும்.') }}
      </p>
    </div>

    <div class="progress-indicator">
      <div class="progress-step" [class.active]="currentStep === 1" [class.completed]="currentStep > 1">
        <span>1</span> {{ getTranslatedText('School Details', 'பள்ளி விவரங்கள்') }}
      </div>
      <div class="progress-step" [class.active]="currentStep === 2" [class.completed]="currentStep > 2">
        <span>2</span> {{ getTranslatedText('Infrastructure Needs', 'உள்கட்டமைப்பு தேவைகள்') }}
      </div>
      <div class="progress-step" [class.active]="currentStep === 3" [class.completed]="currentStep > 3">
        <span>3</span> {{ getTranslatedText('Documentation', 'ஆவணங்கள்') }}
      </div>
      <div class="progress-step" [class.active]="currentStep === 4">
        <span>4</span> {{ getTranslatedText('Review & Submit', 'மதிப்பாய்வு செய்து சமர்ப்பி') }}
      </div>
    </div>

    <form [formGroup]="schoolForm" class="form-container" (ngSubmit)="onSubmit()">
      <div class="form-section card" *ngIf="currentStep === 1" formGroupName="basicInfo">
        <h2 class="section-title">
          <i class="fas fa-info-circle"></i>
          {{ getTranslatedText('Basic School Information', 'அடிப்படை பள்ளித் தகவல்') }}
        </h2>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Select District', 'மாவட்டத்தைத் தேர்ந்தெடுக்கவும்') }} <span class="required">*</span>
            </label>
            <select
              class="form-control"
              formControlName="selectedDistrict"
              [class.is-invalid]="schoolForm.get('basicInfo.selectedDistrict')?.invalid && schoolForm.get('basicInfo.selectedDistrict')?.touched">
              <option value="">{{ getTranslatedText('Choose District', 'மாவட்டத்தைத் தேர்வு செய்க') }}</option>
              <option *ngFor="let district of districts" [value]="district">
                {{district}}
              </option>
            </select>
            <div *ngIf="schoolForm.get('basicInfo.selectedDistrict')?.invalid && schoolForm.get('basicInfo.selectedDistrict')?.touched" class="invalid-feedback">
              {{ getTranslatedText('District selection is required', 'மாவட்டம் தேர்வு செய்வது அவசியம்') }}
            </div>
          </div>

          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Select Government School', 'அரசுப் பள்ளியைத் தேர்ந்தெடுக்கவும்') }} <span class="required">*</span>
            </label>
            <select
              class="form-control"
              formControlName="selectedSchoolId"
              [class.is-invalid]="schoolForm.get('basicInfo.selectedSchoolId')?.invalid && schoolForm.get('basicInfo.selectedSchoolId')?.touched">
              <option value="">{{ getTranslatedText('Choose School', 'பள்ளியைத் தேர்வு செய்க') }}</option>
              <option *ngFor="let school of filteredSchools" [value]="school.id">
                {{ getTranslatedText(school.name, school.nameTa) }} ({{school.udiseCode}})
              </option>
            </select>
            <div *ngIf="schoolForm.get('basicInfo.selectedSchoolId')?.invalid && schoolForm.get('basicInfo.selectedSchoolId')?.touched" class="invalid-feedback">
              {{ getTranslatedText('School selection is required', 'பள்ளி தேர்வு செய்வது அவசியம்') }}
            </div>
            <div *ngIf="schoolForm.get('basicInfo.selectedDistrict')?.value && filteredSchools.length === 0" class="alert alert-info mt-2">
              {{ getTranslatedText('No government schools found in', 'அரசுப் பள்ளிகள் எதுவும் இல்லை') }} {{schoolForm.get('basicInfo.selectedDistrict')?.value}} {{ getTranslatedText('district.', 'மாவட்டத்தில்.') }}
            </div>
          </div>
        </div>

        <hr class="form-divider">
        <h3 class="section-subtitle">{{ getTranslatedText('Auto-populated School Details', 'தானாக நிரப்பப்பட்ட பள்ளி விவரங்கள்') }}</h3>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('School Name (English)', 'பள்ளி பெயர் (ஆங்கிலம்)') }} <span class="required">*</span>
            </label>
            <input type="text" class="form-control" formControlName="schoolNameEn" readonly
              [class.is-invalid]="schoolForm.get('basicInfo.schoolNameEn')?.invalid && schoolForm.get('basicInfo.schoolNameEn')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.schoolNameEn')?.invalid && schoolForm.get('basicInfo.schoolNameEn')?.touched" class="invalid-feedback">
              {{ getTranslatedText('School name in English is required', 'ஆங்கிலத்தில் பள்ளி பெயர் அவசியம்') }}
            </div>
          </div>

          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('School Name (Tamil)', 'பள்ளி பெயர் (தமிழ்)') }} <span class="required">*</span>
            </label>
            <input type="text" class="form-control" formControlName="schoolNameTa" readonly
              [class.is-invalid]="schoolForm.get('basicInfo.schoolNameTa')?.invalid && schoolForm.get('basicInfo.schoolNameTa')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.schoolNameTa')?.invalid && schoolForm.get('basicInfo.schoolNameTa')?.touched" class="invalid-feedback">
              {{ getTranslatedText('School name in Tamil is required', 'தமிழில் பள்ளி பெயர் அவசியம்') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('UDISE Code', 'யு.டி.ஐ.எஸ்.இ குறியீடு') }} <span class="required">*</span>
            </label>
            <input type="text" class="form-control" formControlName="udiseCode" readonly
              [class.is-invalid]="schoolForm.get('basicInfo.udiseCode')?.invalid && schoolForm.get('basicInfo.udiseCode')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.udiseCode')?.invalid && schoolForm.get('basicInfo.udiseCode')?.touched" class="invalid-feedback">
              {{ getTranslatedText('11-digit UDISE code is required', '11 இலக்க யு.டி.ஐ.எஸ்.இ குறியீடு அவசியம்') }}
            </div>
            <small class="form-text text-muted">{{ getTranslatedText('Auto-populated from school selection', 'பள்ளித் தேர்வில் இருந்து தானாக நிரப்பப்பட்டது') }}</small>
          </div>

          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('School Type', 'பள்ளி வகை') }} <span class="required">*</span>
            </label>
            <input type="text" class="form-control" formControlName="schoolType" readonly
              [class.is-invalid]="schoolForm.get('basicInfo.schoolType')?.invalid && schoolForm.get('basicInfo.schoolType')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.schoolType')?.invalid && schoolForm.get('basicInfo.schoolType')?.touched" class="invalid-feedback">
              {{ getTranslatedText('School type is required', 'பள்ளி வகை அவசியம்') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('District', 'மாவட்டம்') }} <span class="required">*</span>
            </label>
            <input type="text" class="form-control" formControlName="district" readonly
              [class.is-invalid]="schoolForm.get('basicInfo.district')?.invalid && schoolForm.get('basicInfo.district')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.district')?.invalid && schoolForm.get('basicInfo.district')?.touched" class="invalid-feedback">
              {{ getTranslatedText('District is required', 'மாவட்டம் அவசியம்') }}
            </div>
          </div>

          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Block/Taluk', 'வட்டம்/தாலுகா') }} <span class="required">*</span>
            </label>
            <input type="text" class="form-control" formControlName="block" readonly
              [class.is-invalid]="schoolForm.get('basicInfo.block')?.invalid && schoolForm.get('basicInfo.block')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.block')?.invalid && schoolForm.get('basicInfo.block')?.touched" class="invalid-feedback">
              {{ getTranslatedText('Block/Taluk is required', 'வட்டம்/தாலுகா அவசியம்') }}
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">
            {{ getTranslatedText('Complete Address', 'முழு முகவரி') }} <span class="required">*</span>
          </label>
          <textarea class="form-control" formControlName="address" rows="3" readonly
            [class.is-invalid]="schoolForm.get('basicInfo.address')?.invalid && schoolForm.get('basicInfo.address')?.touched"></textarea>
          <div *ngIf="schoolForm.get('basicInfo.address')?.invalid && schoolForm.get('basicInfo.address')?.touched" class="invalid-feedback">
            {{ getTranslatedText('Address is required', 'முகவரி அவசியம்') }}
          </div>
        </div>

        <hr class="form-divider">
        <h3 class="section-subtitle">{{ getTranslatedText('Additional Details', 'கூடுதல் விவரங்கள்') }}</h3>

        <div class="form-row">
          <div class="form-group col-md-4">
            <label class="form-label">
              {{ getTranslatedText('Pincode', 'பின்கோடு') }} <span class="required">*</span>
            </label>
            <input type="text" class="form-control" formControlName="pincode"
              [class.is-invalid]="schoolForm.get('basicInfo.pincode')?.invalid && schoolForm.get('basicInfo.pincode')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.pincode')?.invalid && schoolForm.get('basicInfo.pincode')?.touched" class="invalid-feedback">
              {{ getTranslatedText('6-digit pincode is required', '6 இலக்க பின்கோடு அவசியம்') }}
            </div>
          </div>

          <div class="form-group col-md-4">
            <label class="form-label">
              {{ getTranslatedText('Established Year', 'நிறுவப்பட்ட ஆண்டு') }} <span class="required">*</span>
            </label>
            <input type="number" class="form-control" formControlName="establishedYear"
              [class.is-invalid]="schoolForm.get('basicInfo.establishedYear')?.invalid && schoolForm.get('basicInfo.establishedYear')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.establishedYear')?.invalid && schoolForm.get('basicInfo.establishedYear')?.touched" class="invalid-feedback">
              {{ getTranslatedText('Valid year (1900-current year) is required', 'சரியான ஆண்டு (1900-தற்போதைய ஆண்டு) அவசியம்') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Current Student Enrollment', 'தற்போதைய மாணவர் சேர்க்கை') }} <span class="required">*</span>
            </label>
            <input type="number" class="form-control" formControlName="studentCount"
              [class.is-invalid]="schoolForm.get('basicInfo.studentCount')?.invalid && schoolForm.get('basicInfo.studentCount')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.studentCount')?.invalid && schoolForm.get('basicInfo.studentCount')?.touched" class="invalid-feedback">
              {{ getTranslatedText('Student count must be at least 1', 'மாணவர் எண்ணிக்கை குறைந்தது 1 ஆக இருக்க வேண்டும்') }}
            </div>
          </div>

          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Number of Teachers', 'ஆசிரியர்களின் எண்ணிக்கை') }} <span class="required">*</span>
            </label>
            <input type="number" class="form-control" formControlName="teacherCount"
              [class.is-invalid]="schoolForm.get('basicInfo.teacherCount')?.invalid && schoolForm.get('basicInfo.teacherCount')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.teacherCount')?.invalid && schoolForm.get('basicInfo.teacherCount')?.touched" class="invalid-feedback">
              {{ getTranslatedText('Teacher count must be at least 1', 'ஆசிரியர் எண்ணிக்கை குறைந்தது 1 ஆக இருக்க வேண்டும்') }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-4">
            <label class="form-label">
              {{ getTranslatedText('Principal Name', 'முதல்வர் பெயர்') }} <span class="required">*</span>
            </label>
            <input type="text" class="form-control" formControlName="principalName"
              [class.is-invalid]="schoolForm.get('basicInfo.principalName')?.invalid && schoolForm.get('basicInfo.principalName')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.principalName')?.invalid && schoolForm.get('basicInfo.principalName')?.touched" class="invalid-feedback">
              {{ getTranslatedText('Principal name is required', 'முதல்வர் பெயர் அவசியம்') }}
            </div>
          </div>

          <div class="form-group col-md-4">
            <label class="form-label">
              {{ getTranslatedText('Principal Contact Number', 'முதல்வர் தொடர்பு எண்') }} <span class="required">*</span>
            </label>
            <input type="tel" class="form-control" formControlName="principalContact"
              [class.is-invalid]="schoolForm.get('basicInfo.principalContact')?.invalid && schoolForm.get('basicInfo.principalContact')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.principalContact')?.invalid && schoolForm.get('basicInfo.principalContact')?.touched" class="invalid-feedback">
              {{ getTranslatedText('10-digit contact number is required', '10 இலக்க தொடர்பு எண் அவசியம்') }}
            </div>
          </div>

          <div class="form-group col-md-4">
            <label class="form-label">
              {{ getTranslatedText('Principal Email', 'முதல்வர் மின்னஞ்சல்') }} <span class="required">*</span>
            </label>
            <input type="email" class="form-control" formControlName="principalEmail"
              [class.is-invalid]="schoolForm.get('basicInfo.principalEmail')?.invalid && schoolForm.get('basicInfo.principalEmail')?.touched">
            <div *ngIf="schoolForm.get('basicInfo.principalEmail')?.invalid && schoolForm.get('basicInfo.principalEmail')?.touched" class="invalid-feedback">
              {{ getTranslatedText('Valid email is required', 'சரியான மின்னஞ்சல் அவசியம்') }}
            </div>
          </div>
        </div>
      </div>

      <div class="form-section card" *ngIf="currentStep === 2" formGroupName="infrastructure">
        <h2 class="section-title">
          <i class="fas fa-building"></i>
          {{ getTranslatedText('Infrastructure Needs Assessment', 'உள்கட்டமைப்பு தேவைகள் மதிப்பீடு') }}
        </h2>

        <div class="form-group">
          <label class="form-label">
            {{ getTranslatedText('Areas Requiring Renovation', 'புதுப்பிக்க வேண்டிய பகுதிகள்') }} <span class="required">*</span>
          </label>
          <div class="checkbox-grid">
            <div class="form-check" *ngFor="let area of renovationAreas; let i = index">
              <input
                class="form-check-input"
                type="checkbox"
                [id]="area.id"
                [formControl]="getRenovationAreaControl(i)">
              <label class="form-check-label" [for]="area.id">{{ getTranslatedText(area.labelEn, area.labelTa) }}</label>
            </div>
          </div>
          <div *ngIf="schoolForm.get('infrastructure.renovationAreas')?.invalid && schoolForm.get('infrastructure.renovationAreas')?.touched" class="invalid-feedback d-block">
            {{ getTranslatedText('At least one area must be selected', 'குறைந்தது ஒரு பகுதியாவது தேர்ந்தெடுக்கப்பட வேண்டும்') }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Priority Level', 'முன்னுரிமை நிலை') }} <span class="required">*</span>
            </label>
            <div class="priority-levels">
              <div *ngFor="let level of priorityLevels" class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  [id]="'priority-' + level.value"
                  name="priority"
                  [value]="level.value"
                  formControlName="priority">
                <label class="form-check-label" [for]="'priority-' + level.value">{{ getTranslatedText(level.labelEn, level.labelTa) }}</label>
              </div>
              <div *ngIf="schoolForm.get('infrastructure.priority')?.invalid && schoolForm.get('infrastructure.priority')?.touched" class="invalid-feedback d-block">
                {{ getTranslatedText('Priority level is required', 'முன்னுரிமை நிலை அவசியம்') }}
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Estimated Budget Range', 'மதிப்பீடு செய்யப்பட்ட பட்ஜெட் வரம்பு') }}
            </label>
            <select class="form-control" formControlName="budgetRange">
              <option value="">{{ getTranslatedText('Select Budget Range', 'பட்ஜெட் வரம்பைத் தேர்ந்தெடுக்கவும்') }}</option>
              <option *ngFor="let range of budgetRanges" [value]="range.value">{{ getTranslatedText(range.labelEn, range.labelTa) }}</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">
            {{ getTranslatedText('Current Condition of Infrastructure', 'உள்கட்டமைப்பின் தற்போதைய நிலை') }} <span class="required">*</span>
          </label>
          <textarea class="form-control" formControlName="currentCondition" rows="4"
            [class.is-invalid]="schoolForm.get('infrastructure.currentCondition')?.invalid && schoolForm.get('infrastructure.currentCondition')?.touched"></textarea>
          <div *ngIf="schoolForm.get('infrastructure.currentCondition')?.invalid && schoolForm.get('infrastructure.currentCondition')?.touched" class="invalid-feedback">
            {{ getTranslatedText('Current condition description is required', 'தற்போதைய நிலை விளக்கம் அவசியம்') }}
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">
            {{ getTranslatedText('Expected Outcome After Renovation', 'புதுப்பித்தலுக்குப் பிறகு எதிர்பார்க்கப்படும் விளைவு') }}
          </label>
          <textarea class="form-control" formControlName="expectedOutcome" rows="4"></textarea>
        </div>
      </div>

      <div class="form-section card" *ngIf="currentStep === 3" formGroupName="documentation">
        <h2 class="section-title">
          <i class="fas fa-file-alt"></i>
          {{ getTranslatedText('Required Documentation', 'தேவையான ஆவணங்கள்') }}
        </h2>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('School Recognition Certificate', 'பள்ளி அங்கீகார சான்றிதழ்') }} <span class="required">*</span>
            </label>
            <div class="custom-file">
              <input
                type="file"
                class="custom-file-input"
                id="recognitionCert"
                (change)="onFileChange($event, 'recognitionCert', 'documentation')"
                required>
              <label class="custom-file-label" for="recognitionCert">
                {{ schoolForm.get('documentation.recognitionCert')?.value?.name || getTranslatedText('Choose file', 'கோப்பைத் தேர்வு செய்க') }}
              </label>
            </div>
            <div *ngIf="schoolForm.get('documentation.recognitionCert')?.invalid && schoolForm.get('documentation.recognitionCert')?.touched" class="invalid-feedback d-block">
              {{ getTranslatedText('Recognition certificate is required', 'அங்கீகார சான்றிதழ் அவசியம்') }}
            </div>
          </div>

          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Previous Assessment Report (if any)', 'முந்தைய மதிப்பீட்டு அறிக்கை (ஏதேனும் இருந்தால்)') }}
            </label>
            <div class="custom-file">
              <input
                type="file"
                class="custom-file-input"
                id="assessmentReport"
                (change)="onFileChange($event, 'assessmentReport', 'documentation')">
              <label class="custom-file-label" for="assessmentReport">
                {{ schoolForm.get('documentation.assessmentReport')?.value?.name || getTranslatedText('Choose file', 'கோப்பைத் தேர்வு செய்க') }}
              </label>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Current Condition Photos', 'தற்போதைய நிலை புகைப்படங்கள்') }} <span class="required">*</span>
            </label>
            <div class="custom-file">
              <input
                type="file"
                class="custom-file-input"
                id="conditionPhotos"
                (change)="onFileChange($event, 'conditionPhotos', 'documentation')"
                required multiple>
              <label class="custom-file-label" for="conditionPhotos">
                <ng-container *ngIf="schoolForm.get('documentation.conditionPhotos')?.value?.length > 0">
                  {{ schoolForm.get('documentation.conditionPhotos')?.value.length }} {{ getTranslatedText('files selected', 'கோப்புகள் தேர்ந்தெடுக்கப்பட்டன') }}
                </ng-container>
                <ng-container *ngIf="!schoolForm.get('documentation.conditionPhotos')?.value || schoolForm.get('documentation.conditionPhotos')?.value?.length === 0">
                  {{ getTranslatedText('Choose file(s)', 'கோப்பு(களை) தேர்வு செய்க') }}
                </ng-container>
              </label>
            </div>
            <div *ngIf="schoolForm.get('documentation.conditionPhotos')?.invalid && schoolForm.get('documentation.conditionPhotos')?.touched" class="invalid-feedback d-block">
              {{ getTranslatedText('At least one condition photo is required', 'குறைந்தது ஒரு நிலை புகைப்படம் அவசியம்') }}
            </div>
          </div>

          <div class="form-group col-md-6">
            <label class="form-label">
              {{ getTranslatedText('Detailed Budget Estimates (if available)', 'விரிவான பட்ஜெட் மதிப்பீடுகள் (கிடைத்தால்)') }}
            </label>
            <div class="custom-file">
              <input
                type="file"
                class="custom-file-input"
                id="budgetEstimates"
                (change)="onFileChange($event, 'budgetEstimates', 'documentation')">
              <label class="custom-file-label" for="budgetEstimates">
                {{ schoolForm.get('documentation.budgetEstimates')?.value?.name || getTranslatedText('Choose file', 'கோப்பைத் தேர்வு செய்க') }}
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="form-section card" *ngIf="currentStep === 4">
        <h2 class="section-title">
          <i class="fas fa-check-circle"></i>
          {{ getTranslatedText('Review Your Application', 'உங்கள் விண்ணப்பத்தை மதிப்பாய்வு செய்யவும்') }}
        </h2>

        <div class="review-summary">
          <h3 class="review-header">{{ getTranslatedText('Basic School Information', 'அடிப்படை பள்ளித் தகவல்') }}</h3>
          <div class="review-section-content">
            <div class="review-item">
              <strong>{{ getTranslatedText('Selected District:', 'தேர்ந்தெடுக்கப்பட்ட மாவட்டம்:') }}</strong> {{ schoolForm.get('basicInfo.selectedDistrict')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Selected School:', 'தேர்ந்தெடுக்கப்பட்ட பள்ளி:') }}</strong> {{ getTranslatedText(schoolForm.get('basicInfo.schoolNameEn')?.value, schoolForm.get('basicInfo.schoolNameTa')?.value) }} ({{ schoolForm.get('basicInfo.udiseCode')?.value }})
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('School Name (Tamil):', 'பள்ளி பெயர் (தமிழ்):') }}</strong> {{ schoolForm.get('basicInfo.schoolNameTa')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('School Type:', 'பள்ளி வகை:') }}</strong> {{ getTranslatedText(schoolForm.get('basicInfo.schoolType')?.value, getTranslatedText(schoolForm.get('basicInfo.schoolType')?.value, getSchoolTypeTranslated(schoolForm.get('basicInfo.schoolType')?.value))) }} {{ getTranslatedText('School', 'பள்ளி') }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('District (Auto):', 'மாவட்டம் (தானாக):') }}</strong> {{ schoolForm.get('basicInfo.district')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Block/Taluk (Auto):', 'வட்டம்/தாலுகா (தானாக):') }}</strong> {{ schoolForm.get('basicInfo.block')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Address:', 'முகவரி:') }}</strong> {{ getTranslatedText(schoolForm.get('basicInfo.address')?.value, getSchoolAddressTranslated(schoolForm.get('basicInfo.address')?.value)) }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Pincode:', 'பின்கோடு:') }}</strong> {{ schoolForm.get('basicInfo.pincode')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Established Year:', 'நிறுவப்பட்ட ஆண்டு:') }}</strong> {{ schoolForm.get('basicInfo.establishedYear')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Student Enrollment:', 'மாணவர் சேர்க்கை:') }}</strong> {{ schoolForm.get('basicInfo.studentCount')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Number of Teachers:', 'ஆசிரியர்களின் எண்ணிக்கை:') }}</strong> {{ schoolForm.get('basicInfo.teacherCount')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Principal Name:', 'முதல்வர் பெயர்:') }}</strong> {{ schoolForm.get('basicInfo.principalName')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Principal Contact:', 'முதல்வர் தொடர்பு:') }}</strong> {{ schoolForm.get('basicInfo.principalContact')?.value }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Principal Email:', 'முதல்வர் மின்னஞ்சல்:') }}</strong> {{ schoolForm.get('basicInfo.principalEmail')?.value }}
            </div>
          </div>

          <h3 class="review-header mt-4">{{ getTranslatedText('Infrastructure Needs', 'உள்கட்டமைப்பு தேவைகள்') }}</h3>
          <div class="review-section-content">
            <div class="review-item">
              <strong>{{ getTranslatedText('Areas for Renovation:', 'புதுப்பிக்க வேண்டிய பகுதிகள்:') }}</strong> {{ getSelectedRenovationAreas().join(', ') || getTranslatedText('None selected', 'எதுவும் தேர்ந்தெடுக்கப்படவில்லை') }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Priority Level:', 'முன்னுரிமை நிலை:') }}</strong> {{ getTranslatedText(getPriorityLevelLabel(schoolForm.get('infrastructure.priority')?.value), getPriorityLevelLabel(schoolForm.get('infrastructure.priority')?.value)) }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Budget Range:', 'பட்ஜெட் வரம்பு:') }}</strong> {{ getBudgetRangeLabel(schoolForm.get('infrastructure.budgetRange')?.value) }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Current Condition:', 'தற்போதைய நிலை:') }}</strong> {{ schoolForm.get('infrastructure.currentCondition')?.value || getTranslatedText('Not provided', 'வழங்கப்படவில்லை') }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Expected Outcome:', 'எதிர்பார்க்கப்படும் விளைவு:') }}</strong> {{ schoolForm.get('infrastructure.expectedOutcome')?.value || getTranslatedText('Not provided', 'வழங்கப்படவில்லை') }}
            </div>
          </div>

          <h3 class="review-header mt-4">{{ getTranslatedText('Documentation', 'ஆவணங்கள்') }}</h3>
          <div class="review-section-content">
            <div class="review-item">
              <strong>{{ getTranslatedText('Recognition Certificate:', 'அங்கீகார சான்றிதழ்:') }}</strong> {{ schoolForm.get('documentation.recognitionCert')?.value?.name || getTranslatedText('Not uploaded', 'பதிவேற்றப்படவில்லை') }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Assessment Report:', 'மதிப்பீட்டு அறிக்கை:') }}</strong> {{ schoolForm.get('documentation.assessmentReport')?.value?.name || getTranslatedText('Not uploaded', 'பதிவேற்றப்படவில்லை') }}
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Condition Photos:', 'நிலை புகைப்படங்கள்:') }}</strong>
              <ng-container *ngIf="schoolForm.get('documentation.conditionPhotos')?.value?.length > 0">
                {{ schoolForm.get('documentation.conditionPhotos')?.value.length }} {{ getTranslatedText('files selected', 'கோப்புகள் தேர்ந்தெடுக்கப்பட்டன') }}
              </ng-container>
              <ng-container *ngIf="!schoolForm.get('documentation.conditionPhotos')?.value || schoolForm.get('documentation.conditionPhotos')?.value?.length === 0">
                {{ getTranslatedText('Not uploaded', 'பதிவேற்றப்படவில்லை') }}
              </ng-container>
            </div>
            <div class="review-item">
              <strong>{{ getTranslatedText('Budget Estimates:', 'பட்ஜெட் மதிப்பீடுகள்:') }}</strong> {{ schoolForm.get('documentation.budgetEstimates')?.value?.name || getTranslatedText('Not uploaded', 'பதிவேற்றப்படவில்லை') }}
            </div>
          </div>
        </div>
      </div>

      <div class="form-navigation">
        <button type="button" class="btn btn-outline-primary" (click)="prevStep()" [disabled]="currentStep === 1">
          <i class="fas fa-arrow-left"></i> {{ getTranslatedText('Previous', 'முந்தையது') }}
        </button>

        <button *ngIf="currentStep < 4" type="button" class="btn btn-primary" (click)="nextStep()">
          {{ getTranslatedText('Next', 'அடுத்தது') }} <i class="fas fa-arrow-right"></i>
        </button>

        <button *ngIf="currentStep === 4" type="submit" class="btn btn-success" [disabled]="!schoolForm.valid">
          <i class="fas fa-check"></i> {{ getTranslatedText('Submit Application', 'விண்ணப்பத்தைச் சமர்ப்பி') }}
        </button>
      </div>
    </form>
  </div>
</main>

<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-logo">
        <div class="logo-wrapper">
          <img src="assets/images/govt_logo.jpeg" alt="{{ getTranslatedText('Government of Tamil Nadu Logo', 'தமிழ்நாடு அரசு சின்னம்') }}" class="govt-logo">
        </div>
        <div class="footer-logo-text">
          <h3>{{ getTranslatedText('Tamil Nadu School Renovation Initiative', 'தமிழ்நாடு பள்ளி புதுப்பித்தல் முயற்சி') }}</h3>
          <p>{{ getTranslatedText('Building better futures through education', 'கல்வி மூலம் சிறந்த எதிர்காலத்தை உருவாக்குதல்') }}</p>
        </div>
      </div>
      <div class="footer-links">
        <h4>{{ getTranslatedText('Quick Links', 'விரைவு இணைப்புகள்') }}</h4>
        <ul>
          <li><a routerLink="/">{{ getTranslatedText('Home', 'முகப்பு') }}</a></li>
          <li><a routerLink="/schools">{{ getTranslatedText('Schools', 'பள்ளிகள்') }}</a></li>
          <li><a routerLink="/donate">{{ getTranslatedText('Donate', 'நன்கொடை') }}</a></li>
          <li><a routerLink="volunteer">{{ getTranslatedText('Volunteer', 'தன்னார்வலர்') }}</a></li>
        </ul>
      </div>
      <div class="footer-contact">
        <h4>{{ getTranslatedText('Contact Us', 'எங்களைத் தொடர்பு கொள்ள') }}</h4>
        <p>{{ getTranslatedText('infotnschools.com', 'infotnschools.com') }}</p>
        <p>+91 9876543210</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; {{ currentYear }} {{ getTranslatedText('Tamil Nadu School Renovation Initiative. All rights reserved.', 'தமிழ்நாடு பள்ளி புதுப்பித்தல் முயற்சி. அனைத்து உரிமைகளும் பாதுகாக்கப்பட்டவை.') }}</p>
    </div>
  </div>
</footer>