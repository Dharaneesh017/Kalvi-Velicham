<main>
  <section class="hero-banner">
    <div class="hero-backgrounds">
      <div *ngFor="let image of heroBackgroundImages; let i = index" class="hero-background-image"
        [class.active]="i === currentImageIndex" [style.background-image]="'url(' + image + ')'"></div>
    </div>

    <div class="container">
      <div class="hero-content">
        <h1>{{ currentLanguage === 'english' ? 'Transforming Tamil Nadu\'s Government Schools' : 'தமிழ்நாடு அரசு பள்ளிகளின் மாற்றம்' }}</h1>
        <p>{{ currentLanguage === 'english' ? 'Join us in creating better learning environments for over 1 million students across 45,000 government schools' : '45,000 அரசு பள்ளிகளில் 10 லட்சம் மாணவர்களுக்கு சிறந்த கற்றல் சூழலை உருவாக்க எங்களுடன் இணையுங்கள்' }}</p>
        <div class="hero-buttons">
          <a (click)="openAuthModal('login')" class="btn btn-primary">{{ currentLanguage === 'english' ? 'Donate Now' :
            'இப்போது நன்கொடை அளிக்கவும்' }}</a>
          <a routerLink="/volunteer" class="btn btn-secondary">{{ currentLanguage === 'english' ? 'Become a Volunteer' :
            'தன்னார்வலராக இணையுங்கள்' }}</a>
        </div>
      </div>
    </div>
  </section>

  <section class="about-section">
    <div class="container">
      <h2>{{ currentLanguage === 'english' ? 'About the Initiative' : 'முயற்சி பற்றி' }}</h2>
      <div class="about-content">
        <div class="about-text">
          <p>{{ currentLanguage === 'english' ? 'Our mission is to improve the infrastructure and learning environment
            of government schools across Tamil Nadu. We believe every child deserves access to quality education in a
            safe and conducive environment.' : 'தமிழ்நாடு முழுவதும் உள்ள அரசு பள்ளிகளின் உள்கட்டமைப்பு மற்றும் கற்றல்
            சூழலை மேம்படுத்துவதே எங்கள் பணி. பாதுகாப்பான மற்றும் சாதகமான சூழலில் ஒவ்வொரு குழந்தையும் தரமான கல்வியை அணுக
            வேண்டும் என்று நாங்கள் நம்புகிறோம்.' }}</p>
          <p>{{ currentLanguage === 'english' ? 'Since 2018, we\'ve renovated over 1,200 schools, impacting more than
            350,000 students.' : '2018 முதல், நாங்கள் 1,200 க்கும் மேற்பட்ட பள்ளிகளை புதுப்பித்துள்ளோம், இது 350,000
            க்கும் மேற்பட்ட மாணவர்களை பாதித்துள்ளது.' }}</p>
        </div>
        <div class="about-image">
          <img src="assets/images/aboutschool.jpg" alt="asdf">
        </div>
      </div>
    </div>
  </section>

  <section class="how-it-works">
    <div class="container">
      <h2>{{ currentLanguage === 'english' ? 'How It Works' : 'இது எவ்வாறு செயல்படுகிறது' }}</h2>
      <div class="steps-container">
        <div class="step" *ngFor="let step of howItWorks">
          <div class="step-number">{{ step.step }}</div>
          <h3>{{ currentLanguage === 'english' ? step.title : step.titleTa }}</h3>
          <p>{{ currentLanguage === 'english' ? step.description : step.descriptionTa }}</p>
        </div>
      </div>
    </div>
  </section>

  <section class="featured-schools">
    <div class="container">
      <h2>{{ currentLanguage === 'english' ? 'Featured Schools in Need' : 'தேவையுள்ள முன்னிலைப் பள்ளிகள்' }}</h2>
      <div class="schools-grid">
        <div class="school-card" *ngFor="let school of fetchedSchools" (mouseenter)="onSchoolHover(school, true)"
          (mouseleave)="onSchoolHover(school, false)">

          <div class="school-image">
            <img [src]="getSchoolImageUrl(school)"
              alt="{{ currentLanguage === 'english' ? school.schoolNameEn : school.schoolNameTa }}">

          <div class="image-slider-overlay" *ngIf="school.conditionPhotos && school.conditionPhotos.length > 0"
            (click)="openImageModal(school, school.currentPhotoIndex!, $event)">
          
            <img [src]="school.conditionPhotos[school.currentPhotoIndex!]" alt="Condition Photo">
            <button class="slider-btn prev" (click)="previousPhoto(school, $event)">&lt;</button>
            <button class="slider-btn next" (click)="nextPhoto(school, $event)">&gt;</button>
          </div>
          </div>

          <div class="school-info">
            <h3>{{ currentLanguage === 'english' ? school.schoolNameEn : school.schoolNameTa }}</h3>
            <p class="location">{{ currentLanguage === 'english' ? school.district + ', ' + school.block :
              school.district + ', ' + school.block }}</p>
            <p class="needs">{{ getNeedsText(school) }}</p>
          <div class="progress-container">
            <div class="progress-bar" [style]="getProgressBarStyle(school)"></div>
            <span>{{ getFundingProgress(school) }}% {{ currentLanguage === 'english' ? 'funded' : 'நிதி திரட்டப்பட்டது' }}</span>
          </div>
            <div class="card-buttons">
              <a (click)="openAuthModal('login')" class="btn support-btn">
                {{ currentLanguage === 'english' ? 'Support This School' : 'இந்த பள்ளிக்கு ஆதரவளிக்கவும்' }}
              </a>
              <button type="button" class="btn map-btn" (click)="viewOnMap(school)">
                View on Map
              </button>
            </div>
          </div>
        </div>
        <div *ngIf="fetchedSchools.length === 0" class="no-schools-message">
          <p>{{ currentLanguage === 'english' ? 'No featured school projects available yet. Please check back later!' :
            'சிறப்புப் பள்ளி திட்டங்கள் எதுவும் தற்போது இல்லை. பின்னர் சரிபார்க்கவும்!' }}</p>
        </div>
      </div>
    </div>
  </section>

<section class="success-stories">
  <div class="container">
    <h2>{{ currentLanguage === 'english' ? 'Recent Success Stories' : 'சமீபத்திய வெற்றிக் கதைகள்' }}</h2>
    <div class="stories-grid">
      <div class="story-card" *ngFor="let story of completedSchools">
        <div class="story-image">
          <img [src]="getSchoolImageUrl(story)" [alt]="story.schoolNameEn">
        </div>
        <div class="story-content">
          <h3>{{ currentLanguage === 'english' ? story.schoolNameEn : story.schoolNameTa }}</h3>
          <p>{{ story.district }}, {{ story.block }}</p>
          <p class="date">Funding Completed!</p>
          <a routerLink="/successstories" class="btn read-more-btn">
            {{ currentLanguage === 'english' ? 'Read More' : 'மேலும் படிக்க' }}
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

  <section class="cta-section">
    <div class="container">
      <h2>{{ currentLanguage === 'english' ? 'Join Us in Transforming Schools' : 'பள்ளிகளை மாற்றுவதில் எங்களுடன்
        இணையுங்கள்' }}</h2>
      <p>{{ currentLanguage === 'english' ? 'Your support can make a lasting difference in the lives of thousands of
        students' : 'ஆயிரக்கணக்கான மாணவர்களின் வாழ்க்கையில் உங்கள் ஆதரவு நீடித்த மாற்றத்தை ஏற்படுத்தும்' }}</p>
      <div class="cta-buttons">
        <a (click)="openAuthModal('login')" class="btn btn-primary">{{ currentLanguage === 'english' ? 'Donate Now' :
          'இப்போதுநன்கொடை அளிக்கவும்' }}</a>
        <a routerLink="/volunteer" class="btn btn-secondary">{{ currentLanguage === 'english' ? 'Volunteer Today' :
          'இன்றே தன்னார்வலராகுங்கள்' }}</a>
      </div>
    </div>
  </section>
</main>
<div class="image-modal-overlay" *ngIf="showImageModal" (click)="closeImageModal()">
  <div class="image-modal-content" (click)="$event.stopPropagation()">
    <span class="image-modal-close" (click)="closeImageModal()">&times;</span>

    <img [src]="modalPhotos[currentModalPhotoIndex]" alt="Full size school photo">

    <button class="image-modal-nav prev" *ngIf="modalPhotos.length > 1"
      (click)="previousModalPhoto($event)">&#10094;</button>
    <button class="image-modal-nav next" *ngIf="modalPhotos.length > 1"
      (click)="nextModalPhoto($event)">&#10095;</button>
  </div>

</div>
<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-logo">
        <div class="logo-wrapper">
          <img src="assets/images/govt_logo.jpeg" alt="Government of Tamil Nadu Logo" class="govt-logo">
        </div>
        <div class="footer-logo-text">
          <h3>{{ currentLanguage === 'english' ? 'Tamil Nadu School Renovation Initiative' : 'தமிழ்நாடு பள்ளி
            புதுப்பித்தல் முயற்சி' }}</h3>
          <p>{{ currentLanguage === 'english' ? 'Building better futures through education' : 'கல்வி மூலம் சிறந்த
            எதிர்காலத்தை உருவாக்குதல்' }}</p>
        </div>
      </div>
      <div class="footer-links">
        <h4>{{ currentLanguage === 'english' ? 'Quick Links' : 'விரைவு இணைப்புகள்' }}</h4>
        <ul>
          <li><a routerLink="/">{{ currentLanguage === 'english' ? 'Home' : 'முகப்பு' }}</a></li>
          <li><a routerLink="/schools">{{ currentLanguage === 'english' ? 'Schools' : 'பள்ளிகள்' }}</a></li>
          <li><a (click)="openAuthModal('login')">{{ currentLanguage === 'english' ? 'Donate' : 'நன்கொடை' }}</a></li>
          <li><a routerLink="volunteer">{{ currentLanguage === 'english' ? 'Volunteer' : 'தன்னார்வலர்' }}</a></li>
        </ul>
      </div>
      <div class="footer-.contact">
        <h4>{{ currentLanguage === 'english' ? 'Contact Us' : 'எங்களைத் தொடர்பு கொள்ள' }}</h4>
        <p>infotnschools.in</p>
        <p>+91 9876543210</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; {{ currentYear }} {{ currentLanguage === 'english' ? 'Tamil Nadu School Renovation Initiative. All
        rights reserved.' : 'தமிழ்நாடு பள்ளி புதுப்பித்தல் முயற்சி. அனைத்து உரிமைகளும் பாதுகாக்கப்பட்டவை.' }}</p>
    </div>
  </div>
</footer>
<app-auth-modal *ngIf="showAuthModal" [initialTab]="authModalInitialTab" (closeModalEvent)="onAuthModalClose()"
  (authSuccess)="onAuthSuccess($event)">
</app-auth-modal>